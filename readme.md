# **Data Introduction**

The `i2c` folder is the original data set. The directory tree of `i2c` is

```shell
.
├── i2c.bench
├── i2c.test
├── i2c.v
├── osu035_stdcells.v
├── toolA
└── toolB
```

* **i2c.bench**: The circuit file in the banch format of `i2c`
* **i2c.test**: test pattern file in toolA format
* **i2c.stil**: test pattern file in toolB format
* **i2c.v**: `i2c` circuit file using `osu035` standard library
* **osu035_stdcells.v**: `osu035` standard library file
* **toolA**: Original data generated by toolA
* **toolB**: Original data generated by toolB

Original data set is divided into 2 folders: `toolA` and `toolB`, corresponding to the data sets generated by the two tools. Each folder has 6 subfolders: `ssl`, `msl`, `and`, `or`, `dom` and `fe`, which represent the corresponding fault types respectively. 

**Note**: `and` represents `and bridge fault`, `or` represents `or bridge fault`, `dom` represents `dom bridge fault`, and `fe` represents `input pattern fault`



## toolA

The directory trees corresponding to the subfolders under toolA are (take `and` as an example):

```shell
.
├── candidates 					
├── data
├── fail
├── fat-results
├── fat-results_backup
├── i2c.faults
└── i2c_modified.bench
```

* **candidates**: Candidate files generated by toolA. The number in the file name corresponds to the serial number of the fault in the faults file
* **data**: Neighborhood data extracted from the `fat-results` folder according to candidate files 
* **fail**: Fail data files in toolA format after fault simulation 
* **fat-results**: Simulation result files of `i2c_modified.bench`
* **fat-results_backup**: Simulation result files of `i2c.bench`
* **i2c.faults**: Fault file under the current fault type
* **i2c_modified.bench**: The i2c circuit file after inserting the neighborhood under the current fault type

## toolB

The directory trees corresponding to the subfolders under toolB are (take `and` as an example):

```shell
.
├── candidates
├── data
├── diagnosis_report
├── fat-results
├── fat-results_backup
├── i2c.faults
├── i2c_modified.bench
└── tmax_fail
```

* **candidates**: Candidate files extracted from the `diagnosis_report` folder
* **data**: Neighborhood data extracted from the `fat-results` folder according to candidate files 
* **diagnosis_report**: Diagnosis result files generated by toolB
* **fat-results**: Simulation result files of `i2c_modified.bench`
* **fat-results_backup**: Simulation result files of `i2c.bench`
* **i2c.faults**: Fault file under the current fault type
* **i2c_modified.bench**: The `i2c` circuit file after inserting the neighborhood under the current fault type
* **tmax_fail**: Fail data files in toolB format after fault simulation 

------
# **Exerpiments**  
## Activate python environment  
> `cd ./sourceCode`  
> `conda create -n env_grand python=3.9.7`  
> `conda activate env_grand`  
> `bash req.sh`
---
## GRAND for imporving diagnosis resolution
1. Enter the experiment directory from the root directory  
`cd ./sourceCode/GRAND/`
2. Building a dataset by fault type  
    > `python handle-sf.py --dataset i2c-ssl --tool A`  
    > where `ssl` can be replaced by `fe` or `dom`, reflecting the fault type; `A` can be replaced by `B`, reflecting using the data from tool A or tool B.  
    > `python handle-mf.py --dataset i2c-msl --tool A`  
    > where `msl` can be replaced by `and` or `or`.

3. Merge datasets
    > `python merge.py --dataset i2c --tool A`  
    > where `A` can be replaced by `B`, reflecting the same tool used in *STEP 2*.  
4. GRAND
    > `python train.py --dataset i2c --tool A`  
    > where `A` can be replaced by `B`, reflecting the same tool used in *STEP 2*.

---  
## Rectify with GRAND  
1. Enter the experiment directory from the root directory  
    > `cd ./sourceCode/Correction`
2. Statistic  
    > `python statistics.py i2c ssl`  
    > where `ssl` can be replaced by `fe`,`dom`,`msl`,`and`,`or`.
3. Build a dataset by fault type  
    > `python handle_sf.py --dataset i2c-ssl`  
    > `python handle_sf.py --dataset i2c-fe`  
    > `python handle_sf.py --dataset i2c-dom`  
    > `python handle_mf.py --dataset i2c-msl`  
    > `python handle_mf.py --dataset i2c-and`  
    > `python handle_sf.py --dataset i2c-or`  
4. Merge datasets  
    > `python merge.py --dataset i2c`  
5. Rectify  
    > `python train.py --dataset i2c`  